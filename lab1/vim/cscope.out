cscope 15 $HOME/uestc/linux/lab1/vim -q 0000000049 0000001915
	@A.hpp

1 #´agm¨
Úû


3 
	~<c¡ršg
>

4 
	~<f¡»am
>

5 
	~<io¡»am
>

6 
	~<¡dexû±
>

7 
	~<¡ršg
>

8 
	~<veùÜ
>

10 şas 
	cA
 {

11 
	mpublic
:

12 
A
() = ;

13 
ex¶ic™
 
	$A
(
j
è: 
	$i
(
j
) {}

16 
	$£rŸlize
(cÚ¡ 
¡d
::
¡ršg
 &
f’ame
) const {

18 
¡d
::
of¡»am
 
	`os
(
f’ame
, std::
ios
::
bš¬y
);

19 ià(!
os
) {

20 
throw
 
¡d
::
	`ruÁime_”rÜ
("æ— æ³•æ‰“å¼€æ–‡ä»¶è¿›è¡Œå†™å…¥");

24 
os
.
	`wr™e
(
»š‹½»t_ÿ¡
<cÚ¡ *>(&
i
), (i));

25 ià(!
os
) {

26 
throw
 
¡d
::
	`ruÁime_”rÜ
("å†™å…¥æ–‡ä»¶å¤±è´¥");

28 
	}
}

31 
A
 
	$de£rŸlize
(cÚ¡ 
¡d
::
¡ršg
 &
f’ame
) {

33 
¡d
::
if¡»am
 
	`is
(
f’ame
, std::
ios
::
bš¬y
);

34 ià(!
is
) {

35 
throw
 
¡d
::
	`ruÁime_”rÜ
("æ— æ³•æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å–");

38 
A
 
a
;

40 
is
.
	`»ad
(
»š‹½»t_ÿ¡
<*>(&
a
.
i
), (a.i));

41 ià(!
is
) {

42 
throw
 
¡d
::
	`ruÁime_”rÜ
("ä»æ–‡ä»¶è¯»å–æ•°æ®å¤±è´¥");

45  
a
;

46 
	}
}

49 
	g¡d
::
veùÜ
<> 
	$toBufãr
() const {

50 
¡d
::
veùÜ
<> 
	`bufãr
((
i
));

52 
¡d
::
	`memıy
(
bufãr
.
	`d©a
(), &
i
, (i));

53  
bufãr
;

54 
	}
}

57 
A
 
äomBufãr
(cÚ¡ 
¡d
::
veùÜ
<> &
bufãr
) {

58 ià(
bufãr
.
size
() != ()) {

59 
throw
 
¡d
::
ruÁime_”rÜ
("ç¼“å†²åŒºå¤§å°ä¸ç¬¦åˆè¦æ±‚");

62 
A
 
	ga
;

64 
	g¡d
::
memıy
(&
a
.
i
, 
bufãr
.
d©a
(), (a.i));

65  
	ga
;

69 
	$f
(ècÚ¡ { 
¡d
::
cout
 << "˜ğ" << 
i
 << std::
’dl
; 
	}
}

71 
	g´iv©e
:

72 
i
{0};

	@test.cpp

1 
	~"A.hµ
"

3 
	$maš
() {

4 
Œy
 {

6 
A
 
	`a
(100);

9 
a
.
	`£rŸlize
("data1.bin");

11 
A
 
b
 = A::
	`de£rŸlize
("data1.bin");

14 
¡d
::
cout
 << "[From File] ";

15 
b
.
	`f
();

18 
¡d
::
veùÜ
<> 
buf
 = 
a
.
	`toBufãr
();

20 
A
 
c
 = A::
	`äomBufãr
(
buf
);

22 
¡d
::
cout
 << "[From Buffer] ";

23 
c
.
	`f
();

24 } 
	`ÿtch
 (cÚ¡ 
¡d
::
exû±iÚ
 &
e
) {

26 
¡d
::
û¼
 << "å‘ç”Ÿé”™è¯¯: " << 
e
.
	`wh©
(è<< std::
’dl
;

31 
	}
}

	@
1
.
1
/usr/include
2
15
A.hpp
test.cpp
